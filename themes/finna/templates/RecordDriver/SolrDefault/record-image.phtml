<!-- START of: finna - RecordDriver/SolrDefault/record-image.phtml -->
<? $formats = $this->driver->tryMethod('getFormats'); ?>
<div class="recordcover-holder" data-format="<?=$this->transEsc(end($formats))?>" data-noimage="<?=$this->transEsc('no_image')?>">
<?
$images = [];
if (count($allImages)) {
  $images = $allImages;
} else if ($largeImage) {
  $images = [['small' => $smallImage, 'medium' => $mediumImage, 'large' => $largeImage]];
}
$imageData = ['images' => $images, 'type' => $type];
?>

<?= $this->partial('RecordDriver/SolrDefault/record-image-navi.phtml', $imageData) ?>

<? if ($mediumImage): ?>
<a class="image-popup-trigger" href="<?= $this->recordLink()->getUrl($this->driver) ?>#image" title="<?=$this->transEsc('Open Preview')?>">
<? if (count($allImages) <= 1): ?>
  <div class="iconlabel format-<?=$this->record($this->driver)->getFormatClass(end($formats))?>"></div>
<? endif; ?>
<img alt="<?=$this->transEsc('Cover Image')?>" class="recordcover" src="<?=$this->escapeHtmlAttr($mediumImage);?>"/>
<? if (isset($largeImage)): ?>
<i class="fa fa-magnify hidden-print"></i>
<? endif; ?>
</a>
<? else: ?>
  <img src="<?=$this->url('cover-unavailable')?>" class="recordcover" alt="<?=$this->transEsc('No Cover Image')?>"/>
<? endif; ?>

</div>
<!-- END of: finna - RecordDriver/SolrDefault/record-image.phtml -->
